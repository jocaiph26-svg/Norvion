{% extends "base.html" %}
{% block content %}
<div class="header">
  <h1 class="h1">Integrations</h1>
  <p class="sub">Connect automatic data feeds (demo scaffold—no API keys required).</p>
</div>

<div class="card">
  <div class="card-b">
    <p style="margin:0 0 16px 0;">
      This is a <strong>demo-safe scaffold</strong> showing how the product will support automatic data feeds.
      No external API keys required for testing.
    </p>
    <div class="hr"></div>
    
    {% for integration in integrations %}
    <div style="display:flex; justify-content:space-between; align-items:center; padding:12px 0; border-bottom:1px solid var(--border);">
      <div>
        <div style="font-weight:600; text-transform:capitalize;">{{ integration.provider }}</div>
        <div style="font-size:13px; color:var(--muted);">
          Status: <strong>{{ 'Enabled' if integration.is_enabled else 'Disabled' }}</strong>
          {% if integration.last_sync_at %}
            • Last sync: {{ integration.last_sync_at|humandt }}
          {% endif %}
          {% if integration.last_sync_status %}
            • Last status: {{ integration.last_sync_status }}
          {% endif %}
        </div>
        {% if integration.last_sync_note %}
        <div style="font-size:12px; color:var(--muted); margin-top:4px;">{{ integration.last_sync_note }}</div>
        {% endif %}
      </div>
      <div>
        <form method="post" action="/api/integrations/{{ integration.provider }}/sync_now" style="display:inline;">
          <button type="submit" class="btn btn-sm">Sync Now (Demo)</button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<div class="card" style="margin-top:16px;">
  <div class="card-b">
    <h3 style="margin:0 0 12px 0;">How it works (demo mode)</h3>
    <ul style="margin:0; padding-left:20px;">
      <li>If <code>demo_data/{{'{provider}'}}.csv</code> exists: syncs that file</li>
      <li>Otherwise: generates synthetic data</li>
      <li>Next step (post-demo): implement OAuth + scheduled sync jobs</li>
    </ul>
  </div>
</div>
{% endblock %}
